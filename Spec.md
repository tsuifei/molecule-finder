# 🌿 SPAATM - 芳香分子查詢系統 功能規格書

## 📋 專案概述

**專案名稱**: SPAATM Molecule Finder
**版本**: v1.0
**開發日期**: 2026-01-28
**部署平台**: GitHub Pages
**網站 URL**: https://tsuifei.github.io/molecule-finder/

### 專案目標
提供一個簡潔易用的芳香分子多語言查詢系統，支援繁體中文、英文、法文三種語言的模糊搜尋，幫助使用者快速查找精油化學成分資訊。

### 設計理念
- **自然療癒風格**: 採用綠色系主色調，營造舒適的視覺體驗
- **簡潔直覺**: 減少不必要的元素，專注於搜尋功能
- **多語言支援**: 符合國際化需求
- **響應式設計**: Mobile First，完美支援各種裝置

---

## 🎨 UI/UX 設計

### 色彩配置
```
主色調 (Primary):   #7ba892 (綠色)
輔助色 (Secondary): #a8c9b8 (淺綠色)
強調色 (Accent):    #d4af7a (金色)
文字深色:           #3e4a3d
文字淺色:           #6b7f6a
背景淺色:           #f9faf8
背景白色:           #ffffff
邊框顏色:           #e0e5df
```

### 品牌標識
- **Logo**: SPAATM 文字
- **風格**: 簡約、專業、自然

### 響應式設計
- **桌面版**: 最大寬度 1200px，居中顯示
- **平板版**: 768px 以下調整間距
- **手機版**: 480px 以下優化排版

---

## 🔧 核心功能模組

### 1. 密碼保護機制

#### 功能描述
使用者首次進入網站時需要輸入密碼，驗證成功後授權資訊儲存於 localStorage。

#### 功能細節
- **密碼**: `france2026`
- **授權有效期**: 7 天（168 小時）
- **儲存方式**: localStorage (`molecule_auth`)
- **視覺回饋**:
  - 輸入密碼後按鈕顯示 ⏳（處理中）
  - 密碼正確顯示 ✓（成功）後進入系統
  - 密碼錯誤顯示錯誤訊息，2 秒後恢復輸入狀態
- **防護機制**:
  - 防止重複點擊
  - 空密碼檢查
  - 按鈕 disabled 狀態控制

#### 技術實作
```javascript
PASSWORD = 'france2026'
AUTH_KEY = 'molecule_auth'
AUTH_DURATION = 7 * 24 * 60 * 60 * 1000 // 7 天
```

#### 使用情境
1. 用戶首次訪問 → 顯示密碼輸入框
2. 輸入密碼 → 點擊「進入系統」或按 Enter
3. 驗證成功 → 儲存授權資訊 → 進入查詢頁面
4. 7 天內再次訪問 → 自動登入

---

### 2. 多語言介面

#### 支援語言
- 🇹🇼 **繁體中文** (預設)
- 🇬🇧 **English**
- 🇫🇷 **Français**

#### 語言切換
- **UI 元素**: 國旗圓形按鈕
- **位置**: 頁面頂部，標題下方
- **效果**: 點擊後即時切換所有介面文字
- **狀態指示**: 當前語言按鈕有邊框高亮和放大效果

#### 多語言內容
- 頁面標題、副標題
- 搜尋框提示文字
- 搜尋結果標籤（法文、英文、中文）
- 搜尋歷史標題
- 空狀態提示文字
- 授權介面所有文字

---

### 3. 分子資料載入與管理

#### 資料來源
- **檔案**: `data/molecule.json`
- **格式**: JSON
- **資料量**: 388 筆芳香分子

#### 資料結構
```json
{
  "molecules": [
    {
      "id": 1,
      "french": "[6]-gingérol",
      "english": "[6]-gingerol",
      "chinese": "[6]-薑醇"
    }
  ],
  "total": 388,
  "lastUpdated": "2026-01-28"
}
```

#### 資料載入
- **時機**: 密碼驗證成功後
- **方式**: Fetch API 非同步載入
- **錯誤處理**: 載入失敗時顯示錯誤提示

---

### 4. 智慧搜尋系統

#### 4.1 即時搜尋

**功能特點**:
- 輸入時即時搜尋（debounce 300ms）
- 支援三語言模糊搜尋（法文、英文、中文）
- 大小寫不敏感
- 關鍵字高亮顯示

**搜尋邏輯**:
```javascript
molecules.filter(molecule => {
  return (
    molecule.french.toLowerCase().includes(keyword) ||
    molecule.english.toLowerCase().includes(keyword) ||
    molecule.chinese.toLowerCase().includes(keyword)
  );
});
```

#### 4.2 自動完成建議

**功能描述**:
輸入關鍵字時，下拉顯示相關建議（最多 8 筆）

**特點**:
- 下拉框顯示匹配的分子名稱
- 關鍵字在建議中高亮
- 點擊建議自動填入並搜尋
- 點擊外部自動關閉建議框

**UI 設計**:
- 建議框緊貼搜尋框下方
- 圓角設計與搜尋框一致
- Hover 效果提升互動體驗

#### 4.3 搜尋歷史

**功能描述**:
記錄用戶最近搜尋的分子，點擊歷史標籤可快速查看分子詳情

**特點**:
- 最多儲存 10 筆歷史
- 歷史標籤顯示用戶**輸入的語言版本**
  - 搜尋「薑醇」→ 標籤顯示「[6]-薑醇」
  - 搜尋「gingerol」→ 標籤顯示「[6]-gingerol」
  - 搜尋「gingérol」→ 標籤顯示「[6]-gingérol」
- 點擊標籤**直接顯示完整三語對照**，無需重新搜尋
- 去重處理（相同分子只保留最新一筆）
- 一鍵清除所有歷史

**資料結構**:
```javascript
{
  keyword: "薑醇",           // 用戶輸入的關鍵字
  moleculeId: 1,            // 分子 ID
  displayText: "[6]-薑醇"   // 標籤顯示文字（用戶搜尋的語言）
}
```

**儲存方式**: localStorage (`search_history`)

#### 4.4 搜尋結果顯示

**初始狀態**:
- 進入頁面時**不顯示**任何分子列表
- 顯示友善提示：「開始搜尋分子」

**搜尋結果**:
- **不顯示**「搜尋結果」標題和「找到 X 筆結果」
- 直接顯示分子卡片列表
- 每個卡片包含：
  - 分子 ID (#1, #2...)
  - 法文名稱
  - 英文名稱
  - 中文名稱
  - 關鍵字高亮顯示

**無結果狀態**:
- 顯示 🔍 圖標
- 提示「找不到符合的分子」
- 建議「請嘗試其他關鍵字」

**卡片設計**:
- 淺色背景 (#f9faf8)
- 左側金色邊條 (4px)
- Hover 效果：向右平移 + 陰影
- 圓角設計 (12px)

---

### 5. 管理介面 (admin.html)

#### 訪問方式
- **URL**: `/admin.html`
- **授權檢查**: 需先從首頁登入
- **未授權處理**: 重導向到首頁

#### 5.1 資料統計

顯示當前資料庫狀態：
- 分子總數
- 最後更新日期

#### 5.2 CSV 匯入功能

**功能描述**:
上傳 CSV 檔案以更新分子資料庫

**CSV 格式要求**:
```csv
法文,英文,中文
[6]-gingérol,[6]-gingerol,[6]-薑醇
1,8-cinéole,1,8-cineole,1,8-桉油醇
```

**匯入流程**:
1. 拖放或點擊選擇 CSV 檔案
2. 顯示檔案資訊（名稱、大小）
3. 點擊「處理 CSV」按鈕
4. 解析 CSV 並驗證格式
5. 顯示資料預覽（前 50 筆）
6. 啟用 JSON 下載功能

**格式驗證**:
- 必須包含標題行：`法文,英文,中文`
- 自動過濾空白行
- 處理含逗號的欄位（引號包裹）
- UTF-8 編碼

#### 5.3 JSON 下載功能

**功能描述**:
將處理後的資料下載為 JSON 格式

**使用流程**:
1. 處理 CSV 後啟用下載按鈕
2. 點擊「下載 JSON」
3. 下載檔案命名：`molecule_[timestamp].json`
4. 手動替換 `data/molecule.json`
5. 推送到 GitHub 以更新線上資料

**JSON 格式**:
```json
{
  "molecules": [...],
  "total": 388,
  "lastUpdated": "2026-01-28"
}
```

---

## 📱 響應式設計規範

### 桌面版 (> 768px)
- 容器最大寬度: 1200px
- 搜尋框最大寬度: 700px
- 標題字體: 2rem
- 間距: 正常

### 平板版 (≤ 768px)
- 容器 padding 減少
- 標題字體: 1.7rem
- Logo 字體: 1.5rem
- 搜尋區域 padding 調整

### 手機版 (≤ 480px)
- 標題字體: 1.5rem
- Logo 字體: 1.3rem
- 搜尋框 padding 縮小
- 語言按鈕允許換行
- 結果卡片 padding 減少

---

## 🗂️ 專案結構

```
molecule-finder/
├── index.html              # 主查詢頁面
├── admin.html              # 資料管理介面
├── README.md              # 專案說明文件
├── DEPLOY.md              # 部署指南
├── Spec.md                # 功能規格書（本文件）
├── .gitignore             # Git 忽略檔案
│
├── assets/
│   ├── css/
│   │   ├── style.css      # 主要樣式
│   │   └── admin.css      # 管理介面樣式
│   └── js/
│       ├── app.js         # 主應用程式邏輯
│       └── admin.js       # 管理介面邏輯
│
├── data/
│   └── molecule.json      # 分子資料庫
│
├── uploads/               # 上傳檔案暫存（gitignore）
│   └── .gitkeep
│
└── 芳香化學中英對照名稱-貢.xlsx  # 原始 Excel 資料
```

---

## 🔐 安全性與隱私

### 密碼保護
- **方式**: 前端 JavaScript 驗證
- **儲存**: localStorage（明文）
- **安全級別**: 低（適合內部使用或小型團隊）
- **注意事項**:
  - 密碼可在程式碼中被檢視
  - 不適合高安全性需求場景
  - 建議定期更換密碼

### 資料隱私
- 無後端服務器，不收集用戶資料
- 搜尋歷史僅儲存於本地 localStorage
- 可手動清除瀏覽器資料以移除所有記錄

---

## 🚀 部署說明

### GitHub Pages 設定
1. Repository: `molecule-finder`
2. Branch: `main`
3. Folder: `/ (root)`
4. 自動部署: Push 後 1-2 分鐘生效

### 更新流程
1. 修改程式碼或資料
2. `git add .`
3. `git commit -m "更新說明"`
4. `git push`
5. 等待 GitHub Pages 自動部署

### 資料更新流程
1. 準備 CSV 檔案（符合格式要求）
2. 訪問 `/admin.html`
3. 上傳並處理 CSV
4. 下載 JSON 檔案
5. 替換 `data/molecule.json`
6. 提交並推送到 GitHub

---

## 🌐 瀏覽器支援

- ✅ Chrome (推薦)
- ✅ Firefox
- ✅ Safari
- ✅ Edge
- ✅ 所有現代瀏覽器

**最低要求**:
- 支援 ES6 JavaScript
- 支援 Fetch API
- 支援 localStorage
- 支援 CSS Grid 和 Flexbox

---

## 📊 效能指標

### 載入速度
- 初始載入: < 2 秒
- 資料載入: < 500ms
- 搜尋響應: < 300ms (debounce)

### 檔案大小
- HTML: ~3KB (index.html)
- CSS: ~7KB (style.css)
- JavaScript: ~12KB (app.js)
- JSON: ~40KB (molecule.json)
- 總計: ~62KB (未壓縮)

### 優化措施
- Debounce 搜尋輸入
- 建議列表限制 8 筆
- 搜尋歷史限制 10 筆
- 預覽資料限制 50 筆

---

## 🎯 使用情境與流程

### 情境 1: 一般查詢
1. 用戶訪問網站 → 輸入密碼 `france2026`
2. 進入查詢頁面 → 看到「開始搜尋分子」提示
3. 輸入關鍵字「薑」
4. 即時顯示下拉建議
5. 點擊建議或按 Enter
6. 查看完整三語對照結果
7. 關鍵字「薑」被加入搜尋歷史

### 情境 2: 使用搜尋歷史
1. 用戶再次訪問（7 天內自動登入）
2. 看到之前的搜尋歷史標籤
3. 點擊「[6]-薑醇」標籤
4. 直接顯示該分子的完整資訊
5. 無需重新輸入搜尋

### 情境 3: 切換語言
1. 用戶點擊 🇬🇧 切換到英文
2. 所有介面文字切換為英文
3. 搜尋「ginger」
4. 結果標籤顯示 French, English, Chinese
5. 歷史記錄保留原搜尋語言

### 情境 4: 管理員更新資料
1. 管理員準備新的 CSV 檔案
2. 訪問 `/admin.html`
3. 上傳 CSV → 處理 → 預覽
4. 下載 JSON 檔案
5. 在本地替換 `data/molecule.json`
6. Git commit & push
7. 等待 GitHub Pages 更新

---

## 🛠️ 技術棧

### 前端
- **HTML5**: 語義化標籤
- **CSS3**: Grid, Flexbox, Custom Properties
- **JavaScript ES6+**: Class, Async/Await, Arrow Functions

### 資料
- **格式**: JSON
- **來源**: Excel → Python 轉換 → JSON

### 部署
- **平台**: GitHub Pages
- **CI/CD**: GitHub Actions (自動)
- **域名**: github.io

### 開發工具
- **版本控制**: Git
- **編輯器**: VS Code
- **測試**: 本地 HTTP Server

---

## 📝 未來規劃

### 可能的改進方向
1. **搜尋功能增強**
   - 支援正則表達式搜尋
   - 支援分類篩選
   - 支援批次匯出

2. **資料管理**
   - 線上編輯分子資料
   - 版本歷史記錄
   - 資料備份機制

3. **使用體驗**
   - 深色模式
   - 自訂主題色
   - 分享連結功能

4. **安全性**
   - 後端 API 驗證
   - OAuth 登入
   - 資料加密

5. **國際化**
   - 新增更多語言
   - 自動偵測瀏覽器語言
   - 日期時間本地化

---

## 📞 聯絡資訊

**專案**: SPAATM Molecule Finder
**版本**: v1.0
**開發者**: VibeCoding
**GitHub**: https://github.com/tsuifei/molecule-finder
**網站**: https://tsuifei.github.io/molecule-finder/

---

## 📄 更新日誌

### v1.0 (2026-01-28)
- ✅ 初始版本發布
- ✅ 密碼保護機制（7 天有效期）
- ✅ 多語言支援（中英法）
- ✅ 智慧搜尋系統（即時搜尋、自動建議、搜尋歷史）
- ✅ 搜尋歷史顯示用戶輸入語言並可查看完整對照
- ✅ 響應式設計（桌面/平板/手機）
- ✅ 管理介面（CSV 匯入、JSON 下載）
- ✅ 品牌識別 SPAATM
- ✅ 388 筆芳香分子資料
- ✅ GitHub Pages 部署

---

**文件最後更新**: 2026-01-28
**規格版本**: 1.0
